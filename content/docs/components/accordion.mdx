---
title: Accordion
description: Accordion Component â€” collapsible content that actually knows it's better than the rest.
---

import { TypeTable } from 'fumadocs-ui/components/type-table';
import ComponentPlayground from '@/components/code-playground-code'
import { Accordion, AccordionItem, AccordionTrigger, AccordionContent } from '@/components/ui/accordion';
import accordionCode from '@/templates/components/accordion';
import {themes} from '@/twj-lib/types';

<ComponentPlayground
title="Accordion Example"
description="Because sometimes you want to hide brilliance until the user earns it."
code={accordionCode}
scope={{Accordion, AccordionItem, AccordionTrigger, AccordionContent}}
variants={['single','multiple']}
/>

A theme-aware, hydration-safe accordion that opens and closes without making a fuss. It's got context, state management, animation, and a personality â€” mostly smug.

TL;DR: Use `<Accordion>` when you want collapsible sections that behave like professionals. It doesn't beg for attention â€” it commands it.

## Installation

### Using CLI

Yes, the CLI again because you're classy.

<Tabs items={["npm","pnpm"]} defaultIndex={1}> <Tab value="npm">

```bash
npx @twjlabs/ui add accordion
```

  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx @twjlabs/ui add accordion
    ```
  </Tab>
</Tabs>

### Manual Installation

No CLI? Fine. Make sure you have the usual suspects in place: `twj-lib` utilities, theme context, and motion/react for animations. If you don't, see the manual setup docs.

Copy this file into `components/ui/accordion.tsx` and take the developer nod of approval you'll earn.

```tsx title="components/ui/accordion.tsx"
"use client"

import { ThemeProvider, useTheme } from '@/contexts/ui-theme-context'
import { fontApplier } from '@/twj-lib/font-applier'
import { cn } from '@/twj-lib/tw'
import { Theme, TWJComponentsProps } from '@/twj-lib/types'
import { AnimatePresence, motion } from 'motion/react'
import React, { createContext, useContext, useEffect, useState } from 'react'

// --- Main Context ---
type AccordionContextType = {
    selectedItems: string[]; 
    changeSelectedItem: (item: string) => void;
    theme: Theme;
    openType: "single" | "multiple"
}

const AccordionContext = createContext<AccordionContextType | undefined>(undefined)

export const useAccordionContext = () => {
    const context = useContext(AccordionContext)
    if (!context) {
        throw new Error("useAccordionContext must be used within an AccordionProvider")
    }
    return context
}

// --- Item Context ---
type AccordionItemContextType = {
    value: string
    isOpen: boolean
}
const AccordionItemContext = createContext<AccordionItemContextType | undefined>(undefined)

const useAccordionItemContext = () => {
    const context = useContext(AccordionItemContext)
    if (!context) {
        throw new Error("Accordion Sub-components must be used within an AccordionItem")
    }
    return context
}


// --- 1. Main Component ---
interface AccordionProps extends TWJComponentsProps {
    className?: string;
    children?: React.ReactNode;
    openType?: "single" | "multiple" 
    defaultValue?: string | string[] 
}

export const Accordion = ({ className, children, theme, defaultValue, openType = "single" }: AccordionProps) => {
    
    const [selectedItems, setSelectedItems] = useState<string[]>(() => {
        if (!defaultValue) return []
        return Array.isArray(defaultValue) ? defaultValue : [defaultValue]
    })

    const { theme: contextTheme } = useTheme()
    const [mounted, setMounted] = useState(false)

    useEffect(() => {
        const id = setTimeout(() => setMounted(true), 0)
        return () => clearTimeout(id)
    }, [])

    const activeTheme = theme || contextTheme || "modern"
    const appliedTheme = mounted ? activeTheme : "modern"

    const fontClass = fontApplier(appliedTheme)
    const themeClass = `theme-${appliedTheme}`

    const handleValueChange = (itemValue: string) => {
        setSelectedItems((prevItems) => {
            // Case A: Multiple selection
            if (openType === "multiple") {
                return prevItems.includes(itemValue)
                    ? prevItems.filter((i) => i !== itemValue) // Remove if exists
                    : [...prevItems, itemValue]                // Add if new
            }

            // Case B: Single selection (default)
            // If clicking the currently open item, close it (return empty array)
            // Otherwise, replace the entire array with just the new item
            return prevItems.includes(itemValue) ? [] : [itemValue]
        })
    }

    const contextValue = {
        selectedItems,
        changeSelectedItem: handleValueChange,
        theme: appliedTheme,
        openType: openType
    }

    return (
        <AccordionContext.Provider value={contextValue}>
            <ThemeProvider initialTheme={appliedTheme} key={appliedTheme}>
                <div className={cn(
                    "flex flex-col w-full gap-2", 
                    fontClass,
                    themeClass,
                    className
                )}>
                    {children}
                </div>
            </ThemeProvider>
        </AccordionContext.Provider>
    )
}

// --- 2. Accordion Item ---
export const AccordionItem = ({ children, value, className }: { children: React.ReactNode, value: string, className?: string }) => {
    const { selectedItems, theme } = useAccordionContext()
    
    const isOpen = selectedItems.includes(value)

    return (
        <AccordionItemContext.Provider value={{ value, isOpen }}>
            <div className={cn(
                "accordion-item w-full overflow-hidden",
                "border rounded-theme bg-surface dark:bg-surface-dark group opacity-80 hover:opacity-100 transition-all duration-300", 
                
                theme === 'brutalist' && [
                    "border-2 border-foreground dark:border-foreground-dark",
                    "shadow-[4px_4px_0_0_rgba(0,0,0,1)] dark:shadow-[4px_4px_0_0_rgba(255,255,255,1)]",
                    isOpen && " transition-all"
                ],
                
                theme !== 'brutalist' && "border-foreground/10",
                
                className
            )}>
                {children}
            </div>
        </AccordionItemContext.Provider>
    )
}

// --- 3. Accordion Trigger ---
export const AccordionTrigger = ({ children, className }: { children: React.ReactNode, className?: string }) => {
    const { changeSelectedItem } = useAccordionContext()
    const { value, isOpen } = useAccordionItemContext()

    return (
        <button 
            onClick={() => changeSelectedItem(value)}
            className={cn(
                "accordion-trigger",
                "flex items-center justify-between w-full p-4",
                "text-left font-medium transition-all ",
                "[&[data-state=open]>svg]:rotate-180", 
                className
            )}
            data-state={isOpen ? "open" : "closed"}
        >
            {children}
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className="h-4 w-4 shrink-0 transition-transform duration-200"
            >
                <path d="m6 9 6 6 6-6" />
            </svg>
        </button>
    )
}

// --- 4. Accordion Content ---
export const AccordionContent = ({ children, className }: { children: React.ReactNode, className?: string }) => {
    const { isOpen } = useAccordionItemContext()

    return (
        <AnimatePresence initial={false}>
            {isOpen && (
                <motion.div
                    initial="collapsed"
                    animate="open"
                    exit="collapsed"
                    variants={{
                        open: { opacity: 1, height: "auto" },
                        collapsed: { opacity: 0, height: 0 }
                    }}
                    transition={{ duration: 0.3, ease: [0.04, 0.62, 0.23, 0.98] }}
                    className="overflow-hidden transition-all duration-300"
                >
                    <div className={cn("p-4 pt-0 text-muted-foreground dark:text-muted-foreground-dark", className)}>
                        {children}
                    </div>
                </motion.div>
            )}
        </AnimatePresence>
    )
}
```
## âœ¨ Features

* Single or multiple-open behaviour via `openType` (`single` | `multiple`).
* Theme-aware and hydration-safe â€” it picks a theme and owns it.
* Context-driven API: `Accordion`, `AccordionItem`, `AccordionTrigger`, `AccordionContent`.
* Smooth open/close animations powered by `motion/react`.
* Small bundle footprint. Big attitude.

## Usage

```tsx title="Usage Example"
import { Accordion, AccordionItem, AccordionTrigger, AccordionContent } from '@/components/ui/accordion'

<Accordion openType="multiple" defaultValue={["section-1"]}>
  <AccordionItem value="section-1">
    <AccordionTrigger>Section 1</AccordionTrigger>
    <AccordionContent>
      This is the content for section 1. It reveals itself when it feels like it.
    </AccordionContent>
  </AccordionItem>

  <AccordionItem value="section-2">
    <AccordionTrigger>Section 2</AccordionTrigger>
    <AccordionContent>
      Section 2 content. Polite, concise, and correct.
    </AccordionContent>
  </AccordionItem>
</Accordion>
```

## ðŸ“¦ Props

| Prop           | Type                     | Default  | Description                                   |
| -------------- | ------------------------ | -------- | --------------------------------------------- |
| `children`     | `ReactNode`              | â€”        | `Accordion` children (Items & subcomponents). |
| `theme`        | `Theme`                  | context  | Override theme for this accordion instance.   |
| `openType`     | `'single' \| 'multiple'` | `single` | Controls whether multiple items can be open.  |
| `defaultValue` | `string \| string[]`     | â€”        | Initial open item(s).                         |
| `className`    | `string`                 | â€”        | Tailwind classes for the wrapper.             |

### Subcomponents

| Component          | Props                                 | Notes                                                      |
| ------------------ | ------------------------------------- | ---------------------------------------------------------- |
| `AccordionItem`    | `value: string`, `className?: string` | Wraps a single collapsible unit.                           |
| `AccordionTrigger` | `children`, `className?`              | Click to open/close. Includes a rotating chevron.          |
| `AccordionContent` | `children`, `className?`              | Animated content area. Uses `motion/react` for smoothness. |

## Accessibility & Behavior

* Buttons use native `<button>` elements for keyboard friendliness.
* State is propagated through React context â€” predictable and testable.
* Hydration-safe theme handling: chooses a default until client mounts.

## Gotchas

* Make sure each `AccordionItem` has a unique `value` â€” collisions are amateur hour.
* `defaultValue` accepts either a string or an array depending on `openType`.
* If you want deep-linking, handle URL syncing yourself. This component refuses to hold your router's hand.

## Want it meaner or friendlier?

I can make the tone nastier, nicer, or give you a compact 'API-only' cheat sheet. Say the word.
